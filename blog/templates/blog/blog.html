{% extends 'base.html' %}

{% block body %}
{% for post in posts %}
    <h2>{{ post.title }}</h2>
    <p>Author: {{ post.author.username }} {% if user.is_authenticated %}
        {% if not post.author.username == user.username %}
            <a href="{% url 'add_friend' post.author.id %}">Follow user</a>
        {% endif %}  </p>
    {% endif %}  
    <div>
        <h2><a href="{% url 'post_detail' post.id %}">{{ post.title }}</a></h2>
        
    <div class="post_container">
        <p>{{ post.content | safe | escape  }}</p>

    </div>
        
        <p>Categories: {% for cat in post.category.all %}
            {{ cat.name }}
            {% if not forloop.last %}
                , 
            {% endif %}
            {% endfor %}</p>
    
    
    <div class="reactions_container">
        {#        TODO: create JS reactions representation.#} 
        {#          Split them into groups and show icons with the count instead of just a numbers #}
        Reactions: {{ post.reactions_set.all.count }}       
        Comments: {{ post.comment_set.all.count }}
        
    </div>
    </div>
    
    
    
    
    
{% empty %}
    <p>No posts yet.</p>
{% endfor %}

{% endblock %}